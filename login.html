<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>LMS Login — P.E. Section A</title>
<style>
  body {
    font-family: Arial, Helvetica, sans-serif;
    background: linear-gradient(90deg,#007bff,#00b4d8);
    color: #fff;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0;
  }
  .card {
    background: rgba(255,255,255,0.08);
    padding: 22px;
    border-radius: 12px;
    min-width: 320px;
    max-width: 480px;
    box-shadow: 0 8px 30px rgba(2,6,23,0.2);
  }
  h1 {
    margin: 0 0 8px;
    font-size: 20px;
  }
  p.lead {
    margin: 0 0 16px;
    opacity: .95;
  }
  select, input {
    width: 100%;
    padding: 10px;
    border-radius: 8px;
    border: 0;
    margin-bottom: 12px;
    font-size: 15px;
  }
  label {
    display: block;
    font-size: 13px;
    margin-bottom: 6px;
    opacity: .95;
  }
  .hint {
    font-size: 13px;
    color: rgba(255,255,255,0.85);
    margin-bottom: 12px;
  }
  button {
    background: #fff;
    color: #007bff;
    border: 0;
    padding: 10px 14px;
    border-radius: 8px;
    font-weight: 700;
    cursor: pointer;
    width: 100%;
  }
  small {
    display: block;
    margin-top: 10px;
    color: rgba(255,255,255,0.8);
    font-size: 12px;
    text-align: center;
  }
  .error {
    color: #ffdede;
    background: #5a1313;
    padding: 8px;
    border-radius: 6px;
    margin-bottom: 10px;
    display: none;
  }
</style>
</head>
<body>

  <div class="card" role="main" aria-labelledby="title">
    <h1 id="title">Username & Password Login</h1>
    <p class="lead">Select your name and enter the password to access your personalized LMS.</p>

    <div id="error" class="error" role="alert"></div>

    <label for="username">Student name</label>
    <select id="username" aria-label="Student name">
      <option value="">-- Select your name --</option>
      <option>ABELLO, LEXUS MC LAREN CASTILLO</option>
      <option>ABUAN, DHAN JHERO BALCITA</option>
      <option>ABUAN, JAMES JARED FEDERICO</option>
      <option>ARELLANO, RINOA MIRICHEL BALAGOT</option>
      <!-- Add more names as needed -->
    </select>

    <label for="password">Password</label>
    <input id="password" type="password" placeholder="Enter password" autocomplete="off" />

    <div class="hint">
      <strong>Demo password rule:</strong> <span id="pwRule">last name (no spaces, lowercase) + 2025</span><br>
      Example: <em>ABELLO, ...</em> → <code>abello2025</code>
    </div>

    <button id="btnLogin">Login</button>

    <small>Demo only — do not use real passwords here.</small>
  </div>

<script>
(function(){
  const select = document.getElementById('username');
  const passInput = document.getElementById('password');
  const btn = document.getElementById('btnLogin');
  const error = document.getElementById('error');

  function buildCredentials() {
    const creds = {};
    for (let i = 0; i < select.options.length; i++) {
      const opt = select.options[i];
      if (!opt.value) continue;
      const text = opt.textContent.trim();
      const parts = text.split(',');
      const last = parts[0] ? parts[0].trim().replace(/\s+/g,'').toLowerCase() : '';
      const pwd = last + '2025';
      creds[text] = pwd;
    }
    return creds;
  }

  const credentials = buildCredentials();

  select.addEventListener('change', ()=> {
    error.style.display = 'none';
    passInput.value = '';
  });

  btn.addEventListener('click', ()=> {
    error.style.display = 'none';
    const name = select.value;
    const pw = passInput.value || '';
    if (!name) {
      showError('Please select your name.');
      return;
    }
    if (!pw) {
      showError('Please enter your password.');
      return;
    }

    const expected = credentials[name];
    if (!expected) {
      showError('Selected name not found in credential list.');
      return;
    }

    if (pw === expected) {
      localStorage.setItem('lms_current_user', name);
      const safeName = encodeURIComponent(name);
      document.body.style.opacity = '0.8';
      btn.textContent = 'Logging in...';
      btn.disabled = true;
      setTimeout(()=> {
        window.location.href = 'https://eprilynbautista08-hub.github.io/lms-project/personalized.html?user=' + safeName;
      }, 900);
    } else {
      showError('Incorrect password. Check the demo rule (last name + 2025).');
      passInput.value = '';
      passInput.focus();
    }
  });

  function showError(txt) {
    error.style.display = 'block';
    error.textContent = txt;
  }

  window.__demo_credentials = credentials;
})();
</script>

</body>
</html>
